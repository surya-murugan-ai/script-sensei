{
  "tech_stack": [
    "TypeScript",
    "Node.js",
    "Express.js",
    "PostgreSQL",
    "Drizzle ORM",
    "React",
    "Vite",
    "Docker",
    "Sharp",
    "Multer",
    "OpenAI API",
    "Anthropic Claude API",
    "Google Gemini API"
  ],
  "features": [
    {
      "name": "Health Check API",
      "description": "Returns application health status and uptime information",
      "files": ["server/routes.ts"],
      "api_doc": {
        "get": {
          "/api/health": {
            "summary": "Health check endpoint",
            "responses": {
              "200": {
                "description": "Application is healthy",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "status": {"type": "string"},
                        "timestamp": {"type": "string"},
                        "uptime": {"type": "number"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Prescription Management API",
      "description": "Upload, retrieve, and manage prescription images with AI processing",
      "files": ["server/routes.ts", "server/storage.ts", "shared/schema.ts"],
      "api_doc": {
        "get": {
          "/api/prescriptions": {
            "summary": "Get all prescriptions",
            "responses": {
              "200": {
                "description": "List of prescriptions",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "fileName": {"type": "string"},
                          "fileSize": {"type": "string"},
                          "uploadedAt": {"type": "string"},
                          "createdAt": {"type": "string"},
                          "processingStatus": {"type": "string"},
                          "extractedData": {"type": "object"},
                          "imageData": {"type": "string"}
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "/api/prescriptions/{id}": {
            "summary": "Get prescription by ID",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {"type": "string"}
              }
            ],
            "responses": {
              "200": {
                "description": "Prescription details with extraction results"
              },
              "404": {
                "description": "Prescription not found"
              }
            }
          }
        },
        "post": {
          "/api/prescriptions/upload": {
            "summary": "Upload prescription files",
            "requestBody": {
              "content": {
                "multipart/form-data": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "files": {
                        "type": "array",
                        "items": {"type": "string", "format": "binary"}
                      }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Files uploaded successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "prescriptions": {"type": "array"},
                        "message": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "400": {
                "description": "No files uploaded or validation error"
              },
              "500": {
                "description": "Upload failed"
              }
            }
          }
        },
        "delete": {
          "/api/prescriptions/{id}": {
            "summary": "Delete prescription",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {"type": "string"}
              },
              {
                "name": "force",
                "in": "query",
                "schema": {"type": "boolean"}
              }
            ],
            "responses": {
              "200": {
                "description": "Prescription deleted successfully"
              },
              "400": {
                "description": "Force parameter required for completed prescriptions"
              },
              "404": {
                "description": "Prescription not found"
              }
            }
          }
        }
      }
    },
    {
      "name": "AI Processing API",
      "description": "Process prescriptions with AI models for data extraction",
      "files": ["server/routes.ts", "server/aiServices.ts", "server/storage.ts"],
      "api_doc": {
        "post": {
          "/api/prescriptions/{id}/process": {
            "summary": "Process prescription with AI models",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {"type": "string"}
              }
            ],
            "requestBody": {
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "selectedModels": {"type": "array", "items": {"type": "string"}},
                      "customPrompts": {"type": "object"}
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Processing completed successfully"
              },
              "400": {
                "description": "No image data available"
              },
              "404": {
                "description": "Prescription not found"
              },
              "500": {
                "description": "Processing failed"
              }
            }
          },
          "/api/prescriptions/{id}/process-existing": {
            "summary": "Process existing prescription without file upload",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {"type": "string"}
              }
            ],
            "responses": {
              "200": {
                "description": "Processing completed successfully"
              },
              "400": {
                "description": "No image data available"
              },
              "404": {
                "description": "Prescription not found"
              }
            }
          }
        },
        "get": {
          "/api/extraction-results": {
            "summary": "Get all extraction results",
            "responses": {
              "200": {
                "description": "List of extraction results",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "prescriptionId": {"type": "string"},
                          "modelName": {"type": "string"},
                          "fieldName": {"type": "string"},
                          "extractedValue": {"type": "string"},
                          "confidence": {"type": "number"},
                          "processingTime": {"type": "number"},
                          "createdAt": {"type": "string"}
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Configuration Management API",
      "description": "Manage AI extraction configurations",
      "files": ["server/routes.ts", "server/storage.ts", "shared/schema.ts"],
      "api_doc": {
        "get": {
          "/api/configs": {
            "summary": "Get all extraction configurations",
            "responses": {
              "200": {
                "description": "List of configurations",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {"type": "string"},
                          "name": {"type": "string"},
                          "selectedModels": {"type": "array", "items": {"type": "string"}},
                          "selectedFields": {"type": "array", "items": {"type": "string"}},
                          "customPrompts": {"type": "object"},
                          "isDefault": {"type": "boolean"},
                          "createdAt": {"type": "string"}
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "/api/configs": {
            "summary": "Create new extraction configuration",
            "requestBody": {
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "required": ["name", "selectedModels", "selectedFields"],
                    "properties": {
                      "name": {"type": "string"},
                      "selectedModels": {"type": "array", "items": {"type": "string"}},
                      "selectedFields": {"type": "array", "items": {"type": "string"}},
                      "customPrompts": {"type": "object"},
                      "isDefault": {"type": "boolean"}
                    }
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Configuration created successfully"
              },
              "400": {
                "description": "Invalid configuration data"
              }
            }
          }
        },
        "put": {
          "/api/configs/{id}": {
            "summary": "Update extraction configuration",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "schema": {"type": "string"}
              }
            ],
            "responses": {
              "200": {
                "description": "Configuration updated successfully"
              },
              "404": {
                "description": "Configuration not found"
              }
            }
          }
        }
      }
    },
    {
      "name": "Data Export API",
      "description": "Export prescription data in CSV and JSON formats",
      "files": ["server/routes.ts", "server/storage.ts"],
      "api_doc": {
        "get": {
          "/api/export/csv": {
            "summary": "Export prescriptions as CSV",
            "parameters": [
              {
                "name": "prescriptionId",
                "in": "query",
                "schema": {"type": "string"}
              },
              {
                "name": "prescriptionIds",
                "in": "query",
                "schema": {"type": "string"}
              }
            ],
            "responses": {
              "200": {
                "description": "CSV file download",
                "content": {
                  "text/csv": {
                    "schema": {"type": "string"}
                  }
                }
              }
            }
          },
          "/api/export/json": {
            "summary": "Export prescriptions as JSON",
            "parameters": [
              {
                "name": "prescriptionId",
                "in": "query",
                "schema": {"type": "string"}
              },
              {
                "name": "prescriptionIds",
                "in": "query",
                "schema": {"type": "string"}
              }
            ],
            "responses": {
              "200": {
                "description": "JSON data export",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "properties": {
                        "prescriptions": {"type": "array"},
                        "extractionResults": {"type": "array"},
                        "exportedAt": {"type": "string"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  ]
}